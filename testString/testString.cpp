// testString.cpp : This file contains the 'main' function. Program execution begins and ends there.
//

#include"../include/svector/string.h"
#include"../include/svector/codepage.h"
#include"../include/svector/sstream.h"
#include"../include/svector/iostream.h"

#include<map>
const std::map<std::string, LCID> codepages
{
    {"ar", 0x0001},
    {"bg", 0x0002},
    {"ca", 0x0003},
    {"zh-Hans", 0x0004},
    {"cs", 0x0005},
    {"da", 0x0006},
    {"de", 0x0007},
    {"el", 0x0008},
    {"en", 0x0009},
    {"es", 0x000A},
    {"fi", 0x000B},
    {"fr", 0x000C},
    {"he", 0x000D},
    {"hu", 0x000E},
    {"is", 0x000F},
    {"it", 0x0010},
    {"ja", 0x0011},
    {"ko", 0x0012},
    {"nl", 0x0013},
    {"no", 0x0014},
    {"pl", 0x0015},
    {"pt", 0x0016},
    {"rm", 0x0017},
    {"ro", 0x0018},
    {"ru", 0x0019},
    {"hr", 0x001A},
    {"sk", 0x001B},
    {"sq", 0x001C},
    {"sv", 0x001D},
    {"th", 0x001E},
    {"tr", 0x001F},
    {"ur", 0x0020},
    {"id", 0x0021},
    {"uk", 0x0022},
    {"be", 0x0023},
    {"sl", 0x0024},
    {"et", 0x0025},
    {"lv", 0x0026},
    {"lt", 0x0027},
    {"tg", 0x0028},
    {"fa", 0x0029},
    {"vi", 0x002A},
    {"hy", 0x002B},
    {"az", 0x002C},
    {"eu", 0x002D},
    {"hsb", 0x002E},
    {"mk", 0x002F},
    {"st", 0x0030},
    {"ts", 0x0031},
    {"tn", 0x0032},
    {"ve", 0x0033},
    {"xh", 0x0034},
    {"zu", 0x0035},
    {"af", 0x0036},
    {"ka", 0x0037},
    {"fo", 0x0038},
    {"hi", 0x0039},
    {"mt", 0x003A},
    {"se", 0x003B},
    {"ga", 0x003C},
    {"ms", 0x003E},
    {"kk", 0x003F},
    {"ky", 0x0040},
    {"sw", 0x0041},
    {"tk", 0x0042},
    {"uz", 0x0043},
    {"tt", 0x0044},
    {"bn", 0x0045},
    {"pa", 0x0046},
    {"gu", 0x0047},
    {"or", 0x0048},
    {"ta", 0x0049},
    {"te", 0x004A},
    {"kn", 0x004B},
    {"ml", 0x004C},
    {"as", 0x004D},
    {"mr", 0x004E},
    {"sa", 0x004F},
    {"mn", 0x0050},
    {"bo", 0x0051},
    {"cy", 0x0052},
    {"km", 0x0053},
    {"lo", 0x0054},
    {"my", 0x0055},
    {"gl", 0x0056},
    {"kok", 0x0057},
    {"sd", 0x0059},
    {"syr", 0x005A},
    {"si", 0x005B},
    {"chr", 0x005C},
    {"iu", 0x005D},
    {"am", 0x005E},
    {"tzm", 0x005F},
    {"ks", 0x0060},
    {"ne", 0x0061},
    {"fy", 0x0062},
    {"ps", 0x0063},
    {"fil", 0x0064},
    {"dv", 0x0065},
    {"ff", 0x0067},
    {"ha", 0x0068},
    {"yo", 0x006A},
    {"quz", 0x006B},
    {"nso", 0x006C},
    {"ba", 0x006D},
    {"lb", 0x006E},
    {"kl", 0x006F},
    {"ig", 0x0070},
    {"om", 0x0072},
    {"ti", 0x0073},
    {"gn", 0x0074},
    {"haw", 0x0075},
    {"ii", 0x0078},
    {"arn", 0x007A},
    {"moh", 0x007C},
    {"br", 0x007E},
    {"ug", 0x0080},
    {"mi", 0x0081},
    {"oc", 0x0082},
    {"co", 0x0083},
    {"gsw", 0x0084},
    {"sah", 0x0085},
    {"qut", 0x0086},
    {"rw", 0x0087},
    {"wo", 0x0088},
    {"prs", 0x008C},
    {"gd", 0x0091},
    {"ku", 0x0092},
    {"ar-SA", 0x0401},
    {"bg-BG", 0x0402},
    {"ca-ES", 0x0403},
    {"zh-TW", 0x0404},
    {"cs-CZ", 0x0405},
    {"da-DK", 0x0406},
    {"de-DE", 0x0407},
    {"el-GR", 0x0408},
    {"en-US", 0x0409},
    {"es-ES_tradnl", 0x040A},
    {"fi-FI", 0x040B},
    {"fr-FR", 0x040C},
    {"he-IL", 0x040D},
    {"hu-HU", 0x040E},
    {"is-IS", 0x040F},
    {"it-IT", 0x0410},
    {"ja-JP", 0x0411},
    {"ko-KR", 0x0412},
    {"nl-NL", 0x0413},
    {"nb-NO", 0x0414},
    {"pl-PL", 0x0415},
    {"pt-BR", 0x0416},
    {"rm-CH", 0x0417},
    {"ro-RO", 0x0418},
    {"ru-RU", 0x0419},
    {"hr-HR", 0x041A},
    {"sk-SK", 0x041B},
    {"sq-AL", 0x041C},
    {"sv-SE", 0x041D},
    {"th-TH", 0x041E},
    {"tr-TR", 0x041F},
    {"ur-PK", 0x0420},
    {"id-ID", 0x0421},
    {"uk-UA", 0x0422},
    {"be-BY", 0x0423},
    {"sl-SI", 0x0424},
    {"et-EE", 0x0425},
    {"lv-LV", 0x0426},
    {"lt-LT", 0x0427},
    {"tg-Cyrl-TJ", 0x0428},
    {"fa-IR", 0x0429},
    {"vi-VN", 0x042A},
    {"hy-AM", 0x042B},
    {"az-Latn-AZ", 0x042C},
    {"eu-ES", 0x042D},
    {"hsb-DE", 0x042E},
    {"mk-MK", 0x042F},
    {"st-ZA", 0x0430},
    {"ts-ZA", 0x0431},
    {"tn-ZA", 0x0432},
    {"ve-ZA", 0x0433},
    {"xh-ZA", 0x0434},
    {"zu-ZA", 0x0435},
    {"af-ZA", 0x0436},
    {"ka-GE", 0x0437},
    {"fo-FO", 0x0438},
    {"hi-IN", 0x0439},
    {"mt-MT", 0x043A},
    {"se-NO", 0x043B},
    {"yi-001", 0x043D},
    {"ms-MY", 0x043E},
    {"kk-KZ", 0x043F},
    {"ky-KG", 0x0440},
    {"sw-KE", 0x0441},
    {"tk-TM", 0x0442},
    {"uz-Latn-UZ", 0x0443},
    {"tt-RU", 0x0444},
    {"bn-IN", 0x0445},
    {"pa-IN", 0x0446},
    {"gu-IN", 0x0447},
    {"or-IN", 0x0448},
    {"ta-IN", 0x0449},
    {"te-IN", 0x044A},
    {"kn-IN", 0x044B},
    {"ml-IN", 0x044C},
    {"as-IN", 0x044D},
    {"mr-IN", 0x044E},
    {"sa-IN", 0x044F},
    {"mn-MN", 0x0450},
    {"bo-CN", 0x0451},
    {"cy-GB", 0x0452},
    {"km-KH", 0x0453},
    {"lo-LA", 0x0454},
    {"my-MM", 0x0455},
    {"gl-ES", 0x0456},
    {"kok-IN", 0x0457},
    {"syr-SY", 0x045A},
    {"si-LK", 0x045B},
    {"chr-Cher-US", 0x045C},
    {"iu-Cans-CA", 0x045D},
    {"am-ET", 0x045E},
    {"tzm-Arab-MA", 0x045F},
    {"ks-Arab", 0x0460},
    {"ne-NP", 0x0461},
    {"fy-NL", 0x0462},
    {"ps-AF", 0x0463},
    {"fil-PH", 0x0464},
    {"dv-MV", 0x0465},
    {"ff-NG", 0x0467 },
    {"ff-Latn-NG", 0x0467 },
    {"ha-Latn-NG", 0x0468},
    {"yo-NG", 0x046A},
    {"quz-BO", 0x046B},
    {"nso-ZA", 0x046C},
    {"ba-RU", 0x046D},
    {"lb-LU", 0x046E},
    {"kl-GL", 0x046F},
    {"ig-NG", 0x0470},
    {"kr-Latn-NG", 0x0471},
    {"om-ET", 0x0472},
    {"ti-ET", 0x0473},
    {"gn-PY", 0x0474},
    {"haw-US", 0x0475},
    {"la-VA", 0x0476},
    {"so-SO", 0x0477},
    {"ii-CN", 0x0478},
    {"arn-CL", 0x047A},
    {"moh-CA", 0x047C},
    {"br-FR", 0x047E},
    {"ug-CN", 0x0480},
    {"mi-NZ", 0x0481},
    {"oc-FR", 0x0482},
    {"co-FR", 0x0483},
    {"gsw-FR", 0x0484},
    {"sah-RU", 0x0485},
    {"rw-RW", 0x0487},
    {"wo-SN", 0x0488},
    {"prs-AF", 0x048C},
    {"gd-GB", 0x0491},
    {"ku-Arab-IQ", 0x0492},
    {"qps-ploc", 0x0501},
    {"qps-ploca", 0x05FE},
    {"ar-IQ", 0x0801},
    {"ca-ES-valencia", 0x0803},
    {"zh-CN", 0x0804},
    {"de-CH", 0x0807},
    {"en-GB", 0x0809},
    {"es-MX", 0x080A},
    {"fr-BE", 0x080C},
    {"it-CH", 0x0810},
    {"nl-BE", 0x0813},
    {"nn-NO", 0x0814},
    {"pt-PT", 0x0816},
    {"ro-MD", 0x0818},
    {"ru-MD", 0x0819},
    {"sr-Latn-CS", 0x081A},
    {"sv-FI", 0x081D},
    {"ur-IN", 0x0820},
    {"dsb-DE", 0x082E},
    {"tn-BW", 0x0832},
    {"se-SE", 0x083B},
    {"ga-IE", 0x083C},
    {"ms-BN", 0x083E},
    {"bn-BD", 0x0845},
    {"pa-Arab-PK", 0x0846},
    {"ta-LK", 0x0849},
    {"sd-Arab-PK", 0x0859},
    {"iu-Latn-CA", 0x085D},
    {"tzm-Latn-DZ", 0x085F},
    {"ks-Deva-IN", 0x0860},
    {"ne-IN", 0x0861},
    {"ff-Latn-SN", 0x0867},
    {"quz-EC", 0x086B},
    {"ti-ER", 0x0873},
    {"qps-plocm", 0x09FF},
    {"ar-EG", 0x0C01},
    {"zh-HK", 0x0C04},
    {"de-AT", 0x0C07},
    {"en-AU", 0x0C09},
    {"es-ES", 0x0C0A},
    {"fr-CA", 0x0C0C},
    {"sr-Cyrl-CS", 0x0C1A},
    {"se-FI", 0x0C3B},
    {"mn-Mong-MN", 0x0C50},
    {"dz-BT", 0x0C51},
    {"quz-PE", 0x0C6b},
    {"ar-LY", 0x1001},
    {"zh-SG", 0x1004},
    {"de-LU", 0x1007},
    {"en-CA", 0x1009},
    {"es-GT", 0x100A},
    {"fr-CH", 0x100C},
    {"hr-BA", 0x101A},
    {"smj-NO", 0x103B},
    {"tzm-Tfng-MA", 0x105F},
    {"ar-DZ", 0x1401},
    {"zh-MO", 0x1404},
    {"de-LI", 0x1407},
    {"en-NZ", 0x1409},
    {"es-CR", 0x140A},
    {"fr-LU", 0x140C},
    {"bs-Latn-BA", 0x141A},
    {"smj-SE", 0x143B},
    {"ar-MA", 0x1801},
    {"en-IE", 0x1809},
    {"es-PA", 0x180A},
    {"fr-MC", 0x180C},
    {"sr-Latn-BA", 0x181A},
    {"sma-NO", 0x183B},
    {"ar-TN", 0x1C01},
    {"en-ZA", 0x1C09},
    {"es-DO", 0x1C0A},
    {"fr-029", 0x1C0C},
    {"sr-Cyrl-BA", 0x1C1A},
    {"sma-SE", 0x1C3B},
    {"ar-OM", 0x2001},
    {"en-JM", 0x2009},
    {"es-VE", 0x200A},
    {"fr-RE", 0x200C},
    {"bs-Cyrl-BA", 0x201A},
    {"sms-FI", 0x203B},
    {"ar-YE", 0x2401},
    {"es-CO", 0x240A},
    {"fr-CD", 0x240C},
    {"sr-Latn-RS", 0x241A},
    {"smn-FI", 0x243B},
    {"ar-SY", 0x2801},
    {"en-BZ", 0x2809},
    {"es-PE", 0x280A},
    {"fr-SN", 0x280C},
    {"sr-Cyrl-RS", 0x281A},
    {"ar-JO", 0x2C01},
    {"en-TT", 0x2C09},
    {"es-AR", 0x2C0A},
    {"fr-CM", 0x2C0C},
    {"sr-Latn-ME", 0x2C1A},
    {"ar-LB", 0x3001},
    {"en-ZW", 0x3009},
    {"es-EC", 0x300A},
    {"fr-CI", 0x300C},
    {"sr-Cyrl-ME", 0x301A},
    {"ar-KW", 0x3401},
    {"en-PH", 0x3409},
    {"es-CL", 0x340A},
    {"fr-ML", 0x340C},
    {"ar-AE", 0x3801},
    {"es-UY", 0x380A},
    {"fr-MA", 0x380C},
    {"ar-BH", 0x3C01},
    {"en-HK", 0x3C09},
    {"es-PY", 0x3C0A},
    {"fr-HT", 0x3C0C},
    {"ar-QA", 0x4001},
    {"en-IN", 0x4009},
    {"es-BO", 0x400A},
    {"en-MY", 0x4409},
    {"es-SV", 0x440A},
    {"en-SG", 0x4809},
    {"es-HN", 0x480A},
    {"en-AE", 0x4C09},
    {"es-NI", 0x4C0A},
    {"es-PR", 0x500A},
    {"es-US", 0x540A},
    {"es-CU", 0x5C0A},
    {"bs-Cyrl", 0x641A},
    {"bs-Latn", 0x681A},
    {"sr-Cyrl", 0x6C1A},
    {"sr-Latn", 0x701A},
    {"smn", 0x703B},
    {"az-Cyrl", 0x742C},
    {"sms", 0x743B},
    {"zh", 0x7804},
    {"nn", 0x7814},
    {"bs", 0x781A},
    {"az-Latn", 0x782C},
    {"sma", 0x783B},
    {"uz-Cyrl", 0x7843},
    {"mn-Cyrl", 0x7850},
    {"iu-Cans", 0x785D},
    {"tzm-Tfng", 0x785F},
    {"zh-Hant", 0x7C04},
    {"nb", 0x7C14},
    {"sr", 0x7C1A},
    {"tg-Cyrl", 0x7C28},
    {"dsb", 0x7C2E},
    {"smj", 0x7C3B},
    {"uz-Latn", 0x7C43},
    {"pa-Arab", 0x7C46},
    {"mn-Mong", 0x7C50},
    {"sd-Arab", 0x7C59},
    {"chr-Cher", 0x7C5C},
    {"iu-Latn", 0x7C5D},
    {"tzm-Latn", 0x7C5F},
    {"ff-Latn", 0x7C67},
    {"ha-Latn", 0x7C68},
    {"ku-Arab", 0x7C92}
};

int main()
{
    const sci::string test = sU("a\u007F \u0080 \u07ff \u0800 \uFFFF \U00010000 \U0010FFFF");
    const std::u8string utf8Test = sci::toUtf8(test);
    const std::u8string utf8Result = u8"a\x7F \xC2\x80 \xDF\xBF \xE0\xA0\x80 \xEF\xBF\xBF \xF0\x90\x80\x80 \xF4\x8F\xBF\xBF";
    const sci::string utf16Test = sci::fromUtf8<sci::string>(utf8Test);


    if (utf8Test == utf8Result)
    {
        sci::cout << "To UTF-8 passed" << std::endl;
        if (test == utf16Test)
            sci::cout << "UTF-16 round trip test passed" << std::endl;
        else
            sci::cout << "UTF-16 round trip test failed" << std::endl;

    }
    else
        sci::cout << "To UTF-8 failed" << std::endl;

    const std::string test2 = "\x41\xAE\xC6";
    const std::wstring test2WesternResult = L"\u0041\u00AE\u00C6";
    const std::wstring test2JapaneseResult = L"\u0041\uFF6E\uFF86";

    std::string oldLocale = std::setlocale(LC_ALL, nullptr);
    std::setlocale(LC_ALL, "en_GB");
    std::wstring nativeUnicodeWindows = sci::nativeUnicodeFrom(sci::codepageTo<sci::string>(test2));

    std::setlocale(LC_ALL, "ja_JP");

    sci::cout << "\nTesting windows codepage conversion\n";
    std::cout << test2 << std::endl;
    std::wcout << nativeUnicodeWindows << std::endl;
    sci::cout << "The above two strings should be identical" << std::endl;

    std::cout << test2 << std::endl;
    std::wstring nativeUnicodeWindowsJapanese = sci::nativeUnicodeFrom(sci::codepageTo<sci::string>(test2));
    std::wcout << nativeUnicodeWindowsJapanese << std::endl;
    sci::ensureUtf8();
    sci::cout << sci::fromNativeUnicode<sci::string>(nativeUnicodeWindowsJapanese);
    std::wcout << sci::fromNativeUnicode<sci::string>(nativeUnicodeWindowsJapanese);
    sci::cout << "The above two strings should be identical" << std::endl;
    std::setlocale(LC_ALL, oldLocale.c_str());

    sci::cout << sci::string(sU("Test writing directly to cout\n"));
    std::wcout << sci::string(sU("Test writing directly to wcout\n"));

    sci::ostringstream stream;
    stream << 2.5;
}
